<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook 登入範例</title>
</head>
<body>
    <h1>Facebook 登入範例</h1>
    <!-- Facebook Login 按鈕 -->
    <button onclick="fbLogin()">Facebook 登入</button>
    
    <!-- 顯示用戶資料 -->
    <div id="user-info" style="margin-top: 20px;">
        <h2>用戶資料：</h2>
        <p>名字: <span id="user-name">尚未登入</span></p>
        <p>電郵: <span id="user-email">尚未登入</span></p>
    </div>

    <!-- Facebook SDK -->
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/zh_TW/sdk.js"></script>

    <script>
        // 初始化 Facebook SDK
        window.fbAsyncInit = function() {
            FB.init({
                appId      : '1022653489610415',  // 你的 Facebook 應用程式 ID
                cookie     : true,           // 允許後端使用 cookies 來存儲 session
                xfbml      : true,           // 解析網頁中的社交插件
                version    : 'v21.0'         // 使用的 Graph API 版本
            });
            FB.AppEvents.logPageView();      // 紀錄頁面瀏覽
        };

        // 登入按鈕觸發 Facebook Login
        function fbLogin() {
            FB.login(function(response) {
                if (response.status === 'connected') {
                    // 已登入，取得用戶資料
                    fetchUserData();
                } else {
                    // 登入失敗
                    alert('登入失敗！');
                }
            }, {scope: 'public_profile,email'});  // 要求用戶授權的權限，例如公開資料和電子郵件
        }

        // 使用 Facebook Graph API 獲取用戶資料
        function fetchUserData() {
            FB.api('/me', {fields: 'name,email'}, function(response) {
                console.log('User data:', response);
                document.getElementById('user-name').textContent = response.name;
                document.getElementById('user-email').textContent = response.email;
            });
        }
    </script>
</body>
</html>

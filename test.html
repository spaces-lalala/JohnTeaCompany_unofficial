<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook 登入範例</title>
    <link rel="icon" type="image/x-icon" href="img/logo3.jpg"/>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
    crossorigin="anonymous">
    <script src="js/script.js"></script>
    <script src="js/jQuery.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
</head>
<body class="bg_butter">
    <!-- navbar -->
    <nav  class="navbar navbar-expand-lg navbar-dark bg_johnBlue content_font">
        <div class="container-fluid">
          <a class="navbar-brand mx-2" href="index.html">
            <img src="img/logo.JPG" alt="#" width="140" height="70" class="img-fluid">
          </a> 
          <!-- hamburger list -->
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item"><a class="nav-link active" aria-current="page" href="index.html">首頁</a></li>
                <li class="nav-item"><a class="nav-link" href="news.html">最新消息</a></li>
                <li class="nav-item"><a class="nav-link" href="menu.html">飲品菜單</a></li>
                <li class="nav-item"><a class="nav-link" href="intro.html">關於我們</a></li>
                <li class="nav-item"><a class="nav-link" href="test.html">test</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdownBlog" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">門市資訊(北區)</a>
                    <ul class="dropdown-menu dropdown-menu-end bg_butter py-0 text-center border-2 border-dark"  aria-labelledby="navbarDropdownBlog">
                        <li><a class="dropdown-item" href="location_lake.html">台北市內湖店</a></li>
                        <li><a class="dropdown-item" href="location_faith.html">台北市信義店</a></li>
                        <li><a class="dropdown-item" href="location_port.html">台北市南港店</a></li>
                        <li><a class="dropdown-item" href="location_peace.html">新北市中和店</a></li>
                    </ul>
                </li>>
            </ul>
          </div> 
        </div>
    </nav>  
    <section class="pt-5 pb-3">
        <div class="container px-5 my-5">
            <div class="row gx-5 justify-content-center mb-5">
                <div class="col-lg-8 col-xl-6">
                    <div class="text-center">
                        <p class="content_font display-4 bg_johnBlue" style="color:#f3f1e2;">Facebook 登入範例</p>
                        <button onclick="fbLogin()">Facebook 登入</button>
                        <div id="user-info" style="margin-top: 20px;">
                            <h2>用戶資料：</h2>
                            <p>名字: <span id="user-name">尚未登入</span></p>
                            <p>電郵: <span id="user-email">尚未登入</span></p>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </section>

    <!-- Facebook SDK -->
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/zh_TW/sdk.js"></script>

    <script>
        // 初始化 Facebook SDK
        window.fbAsyncInit = function() {
            FB.init({
                appId      : '1022653489610415',  // 你的 Facebook 應用程式 ID
                cookie     : true,           // 允許後端使用 cookies 來存儲 session
                xfbml      : true,           // 解析網頁中的社交插件
                version    : 'v21.0'         // 使用的 Graph API 版本
            });
            FB.AppEvents.logPageView();      // 紀錄頁面瀏覽
        };

        // 登入按鈕觸發 Facebook Login
        function fbLogin() {
            FB.login(function(response) {
                if (response.status === 'connected') {
                    // 已登入，取得用戶資料
                    fetchUserData();
                } else {
                    // 登入失敗
                    alert('登入失敗！');
                }
            }, {scope: 'public_profile,email'});  // 要求用戶授權的權限，例如公開資料和電子郵件
        }

        // 使用 Facebook Graph API 獲取用戶資料
        function fetchUserData() {
            FB.api('/me', {fields: 'name,email'}, function(response) {
                console.log('User data:', response);
                document.getElementById('user-name').textContent = response.name;
                document.getElementById('user-email').textContent = response.email;
            });
        }
    </script>
</body>
</html>
